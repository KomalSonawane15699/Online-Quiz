			                            Quizzy Database

⦁	users Table

CREATE TABLE users (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    full_name VARCHAR(100),
    username VARCHAR(50),
    email VARCHAR(120) UNIQUE,
    password VARCHAR(255),
    role VARCHAR(20),
    coins INT DEFAULT 0,
    xp INT DEFAULT 0,
    level INT DEFAULT 1
);


⦁	quizzes Table

CREATE TABLE quizzes (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(150),
    description TEXT,
    created_by BIGINT,
    total_marks INT,
    time_limit INT,
    FOREIGN KEY (created_by) REFERENCES users(id)
);

⦁	questions Table

CREATE TABLE questions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    quiz_id BIGINT,
    question_text TEXT,
    question_type VARCHAR(50),
    marks INT DEFAULT 1,
    FOREIGN KEY (quiz_id) REFERENCES quizzes(id) ON DELETE CASCADE
);

⦁	options Table

CREATE TABLE options (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    question_id BIGINT,
    option_text TEXT,
    is_correct BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (question_id) REFERENCES questions(id) ON DELETE CASCADE
);

⦁	quiz_attempts Table

CREATE TABLE quiz_attempts (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    quiz_id BIGINT,
    student_id BIGINT,
    score INT DEFAULT 0,
    reward_points INT DEFAULT 0,
    started_at DATETIME,
    completed_at DATETIME,
    FOREIGN KEY (quiz_id) REFERENCES quizzes(id),
    FOREIGN KEY (student_id) REFERENCES users(id)
);


⦁	attempt_answers Table

CREATE TABLE attempt_answers (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    attempt_id BIGINT,
    question_id BIGINT,
    selected_option_id BIGINT,
    is_correct BOOLEAN,
    FOREIGN KEY (attempt_id) REFERENCES quiz_attempts(id) ON DELETE CASCADE,
    FOREIGN KEY (question_id) REFERENCES questions(id),
    FOREIGN KEY (selected_option_id) REFERENCES options(id)
);


⦁	badges

CREATE TABLE badges (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100),
    description TEXT,
    icon VARCHAR(255)
);

⦁	user_badges Table

CREATE TABLE user_badges (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT,
    badge_id BIGINT,
    earned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (badge_id) REFERENCES badges(id)
);

⦁	reward_transactions table

CREATE TABLE reward_transactions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT,
    amount INT,
    type VARCHAR(20),
    reason VARCHAR(200),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);


